$breakpoints: (
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px
) !default;
$column-spacing: 1rem !default;
$column-breakpoint-spacings: () !default;
$grid-columns: 12 !default;

.row {
  display: flex;
  flex-wrap: wrap;
  margin-left: -($column-spacing/2);
  margin-right: -($column-spacing/2);
}

.col {
  padding-left: ($column-spacing/2);
  padding-right: ($column-spacing/2);
  flex: 0 0 100%;
  max-width: 100%;
}

@each $key, $value in $column-breakpoint-spacings {
  @if map-has-key($column-breakpoint-spacings, $key) {
    @include breakpoint($key) {
      .row {
        margin-left: -(map-get($column-breakpoint-spacings, $key)/2);
        margin-right: -(map-get($column-breakpoint-spacings, $key)/2);
      }

      .col {
        padding-left: map-get($column-breakpoint-spacings, $key)/2;
        padding-right: map-get($column-breakpoint-spacings, $key)/2;
      }
    }
  }
}

@mixin flexColMxn($breakpoint: '') {
  $breakpoint-suffix: if($breakpoint == '', '', '\\@' + $breakpoint);

  @for $i from 1 through $grid-columns {
    .col-#{$i + $breakpoint-suffix} {
      max-width: #{(100/12 * $i) + '%'};
      flex: 0 0 #{(100/12 * $i) + '%'};
    }
  }
}

@include flexColMxn();

@each $key, $value in $breakpoints {
  @include breakpoint($key) {
    @include flexColMxn($key);
  }
}
